# 🎉 設定名に自由な文字が使えるようになりました！

## ✨ 新機能

**ドット（.）とスラッシュ（/）を含む設定名が使えるようになりました！**

### 使用例

以下のような設定名が**すべて使えます**：

```
✅ 1.9賞金総額
✅ (仮) 1/1.9 賞金総
✅ テスト#1
✅ 設定[A]
✅ 価格$1000
✅ ポケモンオリパA案
✅ 12/5更新版
✅ 利益率1.5倍
```

## 🔧 仕組み

### 表示名と内部名の分離

アプリは2種類の名前を管理しています：

1. **表示名（displayName）**
   - ユーザーが入力した**元の名前**
   - ドット（.）、スラッシュ（/）などを含む
   - **画面にはこれが表示されます**

2. **内部ID（internalId）**
   - Firebase用に自動変換された名前
   - 特殊文字は安全な文字に置換
   - **内部処理でのみ使用**

### 変換ルール

内部IDは以下のように変換されます（ユーザーには見えません）：

| 文字 | 変換後 |
|-----|--------|
| `.` | `_` |
| `/` | `_` |
| `#` | `_` |
| `$` | `_` |
| `[` | `(` |
| `]` | `)` |

**例:**
- 入力: `1.9賞金総額`
- 表示: `1.9賞金総額` ← そのまま表示
- 内部: `1_9賞金総額` ← 内部処理用（見えない）

## 📖 使い方

### 1. 保存

1. オリパを作成
2. 設定名に**好きな名前**を入力（例: `1.9賞金総額`）
3. 「💾 新規保存」をクリック
4. → 自動的に保存されます！

**特殊文字を含む場合:**
- 入力時に青い情報メッセージが表示されます：
  ```
  💡 保存時に使用できない文字は内部的に変換されますが、表示名はそのまま保持されます
  ```

### 2. 読み込み

1. 設定リストから選択
2. → **元の名前**（例: `1.9賞金総額`）で表示されます

### 3. 更新・削除

- すべて**元の名前**で表示されます
- ユーザーは内部IDを意識する必要はありません

## 🎯 実例

### 保存時

```
入力: (仮) 1/1.9 賞金総
↓
コンソールログ:
✅ 保存完了: {
  displayName: "(仮) 1/1.9 賞金総",
  internalId: "(仮) 1_1_9 賞金総",
  path: "configs/(仮) 1_1_9 賞金総"
}
```

### 表示時

設定リスト:
```
1.9賞金総額 (2025/12/5 15:30:00)
(仮) 1/1.9 賞金総 (2025/12/5 15:25:00)
テスト#1 (2025/12/5 15:20:00)
```

→ すべて**元の名前**で表示されます！

## ⚠️ 注意事項

### 既存の設定について

**古い設定（displayNameがない）:**
- 自動的に内部IDが表示名として使われます
- 問題なく使用できます

**新しい設定（displayNameあり）:**
- 元の名前で表示されます
- ドット・スラッシュも表示されます

### 互換性

- ✅ 既存の設定はすべて動作します
- ✅ 新旧の設定が混在しても問題ありません
- ✅ 後方互換性を完全に保持

## 🔍 デバッグ情報

コンソール（F12キー）で以下のログが確認できます：

```javascript
✅ 保存完了: {
  displayName: "1.9賞金総額",
  internalId: "1_9賞金総額",
  path: "configs/1_9賞金総額"
}
```

- `displayName`: ユーザーに表示される名前
- `internalId`: Firebase内部で使用される名前
- `path`: 実際のFirebaseパス

## 📋 よくある質問

### Q: 既存の設定はどうなりますか？

**A:** 問題なく動作します。
- 古い設定: 内部IDがそのまま表示されます
- 新しい設定: 元の名前で表示されます

### Q: ドットやスラッシュを使うとエラーが出ます

**A:** ブラウザをリロードしてください。
```
Mac: Cmd + Shift + R
Windows: Ctrl + Shift + R
```

### Q: 内部IDを確認できますか？

**A:** コンソール（F12キー）で確認できます。
- 保存時のログに表示されます
- 通常は意識する必要はありません

### Q: 設定名の長さ制限はありますか？

**A:** 実質的な制限はありませんが、**50文字以内**を推奨します。

## 🎊 まとめ

これで、設定名に**好きな文字を自由に使えます**！

- ✅ ドット（.）
- ✅ スラッシュ（/）
- ✅ ハッシュ（#）
- ✅ ドル記号（$）
- ✅ 角括弧（[ ]）

すべて使用可能になりました。表示名はそのまま保持され、内部的にのみ変換されます。

---

**例:**
```
✅ 1.9賞金総額
✅ 12/5更新版
✅ 設定#A-1
✅ 利益率1.5倍[確定]
✅ $1000パック
```

自由に設定名を付けてください！
