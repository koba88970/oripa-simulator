# 📝 仮装景品の再利用機能

## 🎉 新機能：過去の仮装景品を再利用できます！

仮装オリパを作成する際に、**過去に作成した仮装景品を簡単に選択して追加**できるようになりました。

---

## 📋 使い方

### 1. 仮装景品を作成して保存

まず、仮装景品を作成してマスターに保存します：

1. **メインタブ**で景品を追加
2. 「📝 仮装景品（実在しないカードを仮登録）」に**チェック**
3. 景品名、ポイント還元価値、仕入れ価格を入力
4. 「景品を追加」をクリック
5. 「🧮 計算する」をクリック
   → 自動的に**仮装景品マスターに保存**されます

### 2. 過去の仮装景品を再利用

次のオリパで同じ仮装景品を使う場合：

1. **景品管理セクション**で「📝 仮装景品から選択」ボタンをクリック
2. **仮装景品マスター**のリストが表示されます
3. 使いたい仮装景品を選択
4. 自動的にフォームに反映されます
5. 必要に応じて等級や封入数を調整
6. 「景品を追加」をクリック

---

## 🎯 具体的な操作手順

### ステップ1: 最初の仮装オリパを作成

```
1. メインタブを開く
2. 景品管理で「景品名」に「仮想レアカード」と入力
3. 「📝 仮装景品」にチェック
4. ポイント還元価値: 100,000円
5. 仕入れ価格（自動入力される）: 100,000円
6. 「景品を追加」をクリック
7. 「🧮 計算する」をクリック
   → 仮装景品マスターに自動保存！
```

### ステップ2: 別のオリパで同じ景品を使う

```
1. 新しいオリパを作成開始
2. 景品管理で「📝 仮装景品から選択」をクリック
3. リストから「仮想レアカード」を選択
4. 自動的にフォームに以下が入力されます：
   - 景品名: 仮想レアカード
   - ポイント還元価値: 100,000円
   - 仕入れ価格: 100,000円
   - 仮装景品モード: ON
5. 等級と封入数を設定
6. 「景品を追加」をクリック
```

---

## 🔍 仮装景品マスターの内容

### 表示される情報

- **📝 景品名**
- **💰 仕入れ価格**
- **🎁 還元価値**

### 検索機能

リストが多い場合は、検索ボックスで絞り込めます：

```
🔍 景品名で検索...
```

例：「レア」と入力すると、名前に「レア」を含む景品のみ表示されます。

### 表示順

最新の仮装景品が上に表示されます（作成日時の新しい順）。

---

## 💡 活用例

### パターン1: 定番景品の再利用

```
シナリオ：
複数のオリパで同じ高額カードを仮想的に使いたい

手順：
1. 最初のオリパで「仮想PSA10カード」を作成
2. 別のオリパで「📝 仮装景品から選択」で再利用
3. 封入数だけ変更して追加
```

### パターン2: 複数バリエーションの比較

```
シナリオ：
同じ景品構成で、封入数だけ変えて比較したい

手順：
1. オリパAで仮装景品を作成
2. オリパBで「仮装景品から選択」を使って同じ景品を追加
3. 封入数を変更して比較
```

### パターン3: テンプレートとして使用

```
シナリオ：
よく使う景品セットをテンプレート化

手順：
1. 「定番セット」として仮装景品を複数作成
2. 新しいオリパで「仮装景品から選択」を連続使用
3. すべての景品を一気に追加
```

---

## 🎨 UI の説明

### ボタンの配置

景品名の入力フィールドの右側に3つのボタンが並びます：

```
[景品名入力フィールド] [📋 マスターから選択] [📝 仮装景品から選択]
```

### ボタンの色

- **📋 マスターから選択**: 青色（通常の景品）
- **📝 仮装景品から選択**: オレンジ色（仮装景品）

### モーダルのデザイン

仮装景品選択モーダルは：
- オレンジ色のアクセント
- 📝 アイコンで仮装景品であることを明示
- 検索ボックス付き
- スクロール可能なリスト

---

## ⚠️ 注意事項

### 仮装景品マスターへの保存タイミング

仮装景品は、以下のタイミングで自動的にマスターに保存されます：

- ✅ 「🧮 計算する」をクリックした時
- ✅ 「⭐ スコア評価」をクリックした時
- ✅ 「💾 オリパを保存」をクリックした時

**注意:** 景品を追加しただけでは保存されません。必ず上記のいずれかを実行してください。

### 重複について

同じ名前の仮装景品を複数回作成した場合：
- すべてマスターに保存されます
- リストには重複して表示されます
- それぞれ独立した景品として扱われます

### クラウド同期

- ✅ 仮装景品マスターは**クラウドに自動保存**されます
- ✅ 別のデバイスでも同じ仮装景品を使えます
- ⚠️ Firebaseルールが正しく設定されている必要があります

---

## 🔧 トラブルシューティング

### 「仮装景品マスターが空です」と表示される

**原因:** まだ仮装景品を作成していない

**解決策:**
1. メインタブで仮装景品を作成
2. 「🧮 計算する」をクリック
3. 再度「📝 仮装景品から選択」を試す

### 仮装景品が表示されない

**原因:** ブラウザのキャッシュ、またはFirebase同期の問題

**解決策:**
1. ブラウザをリロード（Cmd+Shift+R / Ctrl+Shift+R）
2. コンソール（F12キー）でエラーを確認
3. Firebaseルールに `temporaryPrizeMaster` が含まれているか確認

### 選択しても自動入力されない

**原因:** JavaScriptエラー

**解決策:**
1. ブラウザをリロード（Cmd+Shift+R / Ctrl+Shift+R）
2. コンソール（F12キー）で赤いエラーがないか確認

---

## 📊 データ構造

仮装景品マスターには以下の情報が保存されます：

```javascript
{
  id: 1733456789012,
  name: "仮想レアカード",
  purchasePrice: 100000,
  rewardValue: 100000,
  stock: 9999,
  image: null,
  isTemporary: true,
  createdAt: 1733456789012
}
```

---

## 🎊 まとめ

仮装景品の再利用機能により：

- ✅ 同じ景品を何度も入力する手間が省けます
- ✅ 入力ミスを減らせます
- ✅ オリパ作成が高速化します
- ✅ テンプレートとして活用できます
- ✅ 複数のオリパで一貫性を保てます

**使い方のポイント:**
1. 仮装景品を作成したら「🧮 計算する」を忘れずに
2. 「📝 仮装景品から選択」で簡単に再利用
3. 検索機能で目的の景品をすぐに見つけられます

効率的にオリパを作成できるようになりました！
